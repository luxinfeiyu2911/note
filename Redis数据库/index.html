<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Redisæ•°æ®åº“ | å°ğŸ¦Œä¹¦å±‹</title>

<link rel="shortcut icon" href="https://stag1129.github.io/note//favicon.ico?v=1673423068352">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://stag1129.github.io/note//styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg" style="padding-top: 10px !important; padding-bottom: 10px !important;">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="å¤´åƒ">
        <div class="site-name gt-c-content-color-first">
            å°ğŸ¦Œä¹¦å±‹
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                            <a href="/" class="menu gt-a-link">
                                ğŸ é¦–é¡µ
                            </a>
                            
                </div>
                
                <div class="nav-item">
                    
                            <a href="/archives" class="menu gt-a-link">
                                ğŸ“šå½’æ¡£
                            </a>
                            
                </div>
                
                <div class="nav-item">
                    
                            <a href="/tags" class="menu gt-a-link">
                                ğŸ”–æ ‡ç­¾
                            </a>
                            
                </div>
                
                <div class="nav-item">
                    
                            <a href="/about" class="menu gt-a-link">
                                ğŸª¶å…³äº
                            </a>
                            
                </div>
                
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1673423068352"
                action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>
    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second" style="border-radius: 7px;">
            <article class="gt-post-content">
                <h2 class="post-title">
                    Redisæ•°æ®åº“
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        Â· 2022-12-28 Â·
                    </time>
                    
                        <a href="https://stag1129.github.io/note/database_normal/" class="post-tags">
                            # æ•°æ®åº“
                        </a>
                    
                        <a href="https://stag1129.github.io/note/database_nostructure/" class="post-tags">
                            # éç»“æ„åŒ–æ•°æ®åº“
                        </a>
                    
                </div>
                <div class="post-content">
                    <p>ğŸ“– å†…å®¹ä»‹ç»ï¼šRedisæ˜¯ä¸€ç§NoSQLæ•°æ®åº“<br>
æ•°ç™¾ä¸‡å¼€å‘äººå‘˜ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜ã€æµå¼å¤„ç†å¼•æ“å’Œæ¶ˆæ¯ä»£ç†çš„å¼€æºå†…å­˜ä¸­æ•°æ®å­˜å‚¨</p>
<!-- more -->
<h2 id="ç¬¬ä¸€ç« -nosqlç›¸å…³æ¦‚å¿µ">ç¬¬ä¸€ç«  NoSQLç›¸å…³æ¦‚å¿µ</h2>
<h3 id="11-nosqlç‰¹ç‚¹åŠä¼˜åŠ¿">1.1 NoSQLç‰¹ç‚¹åŠä¼˜åŠ¿</h3>
<blockquote>
<p>ğŸ”– NoSQLå…¨ç§°æ˜¯Not Only SQLï¼Œæ˜¯ä¸€ç§éå…³ç³»å‹æ•°æ®åº“</p>
</blockquote>
<p>ç›¸è¾ƒäºä¼ ç»Ÿçš„SQLæ•°æ®åº“è€Œè¨€ï¼ŒNoSQLç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¸ä¿è¯å…³ç³»æ•°æ®ACIDç‰¹æ€§ - <strong>ACID</strong>ï¼šåŸå­æ€§(atomicityï¼Œæˆ–ç§°ä¸å¯åˆ†å‰²æ€§)ã€ ä¸€è‡´æ€§ (consistency)ã€ éš”ç¦»æ€§ (isolationï¼Œåˆç§°ç‹¬ç«‹æ€§)ã€ æŒä¹…æ€§ (durabilit)</li>
<li>å¹¶ä¸éµå¾ªSQLæ ‡å‡†</li>
<li>æ¶ˆé™¤æ•°æ®ä¹‹å‰å…³è”ç‰¹æ€§</li>
</ul>
<p>ç›¸è¾ƒäºä¼ ç»Ÿçš„SQLæ•°æ®åº“è€Œè¨€ï¼ŒNoSQLä¼˜åŠ¿ï¼š</p>
<ul>
<li>è¿œè¶…ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„æ€§èƒ½</li>
<li>éå¸¸æ˜“äºæ‰©å±•</li>
<li>æ•°æ®æ¨¡å‹æ›´åŠ çµæ´»</li>
<li>é«˜å¯ç”¨</li>
</ul>
<h3 id="12-nosqlç§ç±»">1.2 NoSQLç§ç±»</h3>
<blockquote>
<p>ğŸ”– Redisæ•°æ®åº“æ˜¯ä¸€ä¸ªå¼€æºçš„é”®å€¼å­˜å‚¨æ•°æ®åº“ï¼Œæ‰€æœ‰çš„æ•°æ®å…¨éƒ¨å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå®ƒçš„æ€§èƒ½å¤§å¤§é«˜äºç£ç›˜IOï¼Œå¹¶ä¸”å®ƒä¹Ÿå¯ä»¥æ”¯æŒæ•°æ®æŒä¹…åŒ–ï¼Œæ”¯æŒæ¨ªå‘æ‰©å±•,ä¸»ä»å¤åˆ¶ç­‰</p>
</blockquote>
<p>NoSQLæ•°æ®åº“çš„ç§ç±»:</p>
<ol>
<li>é”®å€¼å­˜å‚¨æ•°æ®åº“: æ‰€æœ‰æ•°æ®éƒ½æ˜¯é€šè¿‡é”®å€¼æ–¹å¼å­˜å‚¨çš„,ç±»ä¼¼äºHashMap,ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•æ–¹ä¾¿,æ€§èƒ½ä¹Ÿéå¸¸é«˜</li>
<li>åˆ—å­˜å‚¨æ•°æ®åº“: é€šå¸¸ç”¨æ¥åº”å¯¹åˆ†å¸ƒå¼å­˜å‚¨çš„æµ·é‡æ•°æ®.é”®ä»ç„¶å­˜åœ¨,ä½†æ˜¯å®ƒä»¬çš„ç‰¹ç‚¹æ˜¯æŒ‡å‘äº†å¤šä¸ªåˆ—</li>
<li>æ–‡æ¡£å‹æ•°æ®åº“: å®ƒæ˜¯ä»¥ä¸€ç§ç‰¹å®šçš„æ–‡æ¡£æ ¼å¼å­˜å‚¨æ•°æ®,æ¯”å¦‚JSONæ ¼å¼,åœ¨å¤„ç†ç½‘é¡µç­‰å¤æ‚çš„æ•°æ®æ—¶,æ–‡æ¡£å‹æ•°æ®åº“æ¯”ä¼ ç»Ÿé”®å€¼æ•°æ®åº“çš„æŸ¥è¯¢æ•ˆç‡æ›´é«˜</li>
<li>å›¾å½¢æ•°æ®åº“: åˆ©ç”¨ç±»ä¼¼äºå›¾çš„æ•°æ®ç»“æ„å­˜å‚¨æ•°æ®,ç»“åˆå›¾ç›¸å…³ç®—æ³•é«˜é€Ÿè®¿é—®</li>
</ol>
<h2 id="ç¬¬äºŒç« -rediså®‰è£…å’Œéƒ¨ç½²">ç¬¬äºŒç«  Rediså®‰è£…å’Œéƒ¨ç½²</h2>
<blockquote>
<p>ğŸ”— Redisä¸‹è½½åœ°å€ï¼š</p>
<ol>
<li>å®˜ç½‘åœ°å€ï¼š<a href="https://redis.io/download/">https://redis.io/download/</a></li>
<li>Windowsç‰ˆæœ¬ï¼š<a href="https://github.com/tporadowski/redis/releases">https://github.com/tporadowski/redis/releases</a></li>
</ol>
</blockquote>
<h3 id="21-åœ¨centosä¸‹å®‰è£…redis">2.1 åœ¨CentOSä¸‹å®‰è£…Redis</h3>
<ol>
<li>ä¸‹è½½Rediså®‰è£…åŒ…<br>
<code>wget https://github.com/redis/redis/archive/7.0.7.tar.gz</code></li>
<li>è§£å‹Rediså®‰è£…åŒ…<br>
<code>tar -zxvf 7.0.7.tar.gz</code></li>
<li>è¿›å…¥Reidsç›®å½•å¹¶ç¼–è¯‘<br>
<code>cd ./7.0.7 &amp;&amp; make</code></li>
<li>å®‰è£…Redis<br>
<code>make install</code></li>
</ol>
<h3 id="22-åœ¨windowsä¸‹å®‰è£…redis">2.2 åœ¨Windowsä¸‹å®‰è£…Redis</h3>
<ol>
<li>ä¸‹è½½Rediså®‰è£…åŒ…<br>
ä¸‹è½½åœ°å€: <a href="https://github.com/tporadowski/redis/releases/download/v5.0.14.1/Redis-x64-5.0.14.1.zip">https://github.com/tporadowski/redis/releases/download/v5.0.14.1/Redis-x64-5.0.14.1.zip</a></li>
<li>è§£å‹Redisçš„ZIPåŒ…<br>
Redis-x64-5.0.14.1.zip -&gt; Redis-x64-5.0.14.1æ–‡ä»¶å¤¹</li>
</ol>
<h3 id="23-å¸¸è§é—®é¢˜">2.3 å¸¸è§é—®é¢˜</h3>
<ol>
<li>æç¤ºæ²¡æœ‰å®‰è£…GCC<br>
è§£å†³æ–¹æ³•: <code>yum install gcc</code><br>
é—®é¢˜æˆªå›¾:<br>
<img src="https://stag1129.github.io/note//post-images/1673273105149.jpg" alt="éœ€è¦å®‰è£…GCC" loading="lazy"></li>
<li>æç¤ºæ²¡æœ‰æ‰¾åˆ°ç›®å½•<br>
è§£å†³åŠæ³•: <code>make MALLOC=libc</code><br>
é—®é¢˜æˆªå›¾:<br>
<img src="https://stag1129.github.io/note//post-images/1673273698816.png" alt="æç¤ºæ²¡æœ‰æ‰¾åˆ°ç›®å½•" loading="lazy"></li>
</ol>
<h2 id="ç¬¬ä¸‰ç« -åŸºæœ¬æ“ä½œ-hashmapstringstring">ç¬¬ä¸‰ç«  åŸºæœ¬æ“ä½œ (HashMap&lt;String,String&gt;)</h2>
<blockquote>
<p>ğŸ”– Redisæ•°æ®åº“æ˜¯æœ‰ä¸€ä¸ªæ•´æ•°ç´¢å¼•æ ‡è¯†.é»˜è®¤æƒ…å†µä¸‹,Redisæ•°æ®åº“ä½¿ç”¨0å·æ•°æ®åº“,é€šè¿‡Redisé…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°æ¥ä¿®æ”¹æ•°æ®åº“æ€»æ•°,é»˜è®¤å…±16ä¸ª</p>
</blockquote>
<ol>
<li>åˆ‡æ¢Redisæ•°æ®åº“<br>
<code>select æ•°æ®åº“ç´¢å¼•æ ‡è¯†</code></li>
<li>æ·»åŠ æ•°æ®<br>
æ·»åŠ ä¸€ä¸ªæ•°æ®: <code>set &lt;key&gt; &lt;value&gt;</code><br>
æ·»åŠ å¤šä¸ªæ•°æ®:  <code>mset [&lt;key&gt; &lt;value&gt;]...</code><br>
æ‰€æœ‰å­˜å‚¨çš„æ•°æ®é»˜è®¤ä¼šä»¥<strong>å­—ç¬¦ä¸²</strong>è¿›è¡Œä¿å­˜,å¯ä»¥é€šè¿‡ : è¿›è¡Œæ¿å—åˆ†å‰²<br>
<code>set A:key1:key2 value</code></li>
<li>è·å–å­˜å…¥çš„é”®å€¼<br>
<code>get &lt;key&gt;</code></li>
<li>å­˜å‚¨æ•°æ®æ—¶,è®¾å®šæ•°æ®è¿‡æœŸæ—¶é—´,é»˜è®¤æ°¸ä¹…æœ‰æ•ˆ(-1)<br>
è®¾ç½®è¿‡æœŸç§’æ•°: <code>set &lt;key&gt; &lt;value&gt; EX ç§’æ•°</code><br>
è®¾ç½®è¿‡æœŸæ¯«ç§’æ•°: <code>set &lt;key&gt; &lt;value&gt; PX æ¯«ç§’</code></li>
<li>å•ç‹¬è®¾å®šæ•°æ®è¿‡æœŸæ—¶é—´<br>
<code>expire &lt;key&gt; ç§’æ•°</code></li>
<li>æŸ¥çœ‹æŸä¸ªé”®å€¼å¯¹çš„å‰©ä½™æœ‰æ•ˆæ—¶é—´<br>
å‰©ä½™æœ‰æ•ˆç§’æ•°: <code>ttl &lt;key&gt;</code><br>
å‰©ä½™æœ‰æ•ˆæ¯«ç§’æ•°: <code>pttl &lt;key&gt;</code></li>
<li>è®¾ç½®æŸä¸ªé”®å€¼å¯¹æ°¸ä¹…æœ‰æ•ˆ<br>
<code>persist &lt;key&gt;</code></li>
<li>åˆ é™¤é”®å€¼å¯¹<br>
<code>del &lt;key&gt; [&lt;key&gt;]...</code></li>
<li>æŸ¥çœ‹æ‰€æœ‰çš„é”®<br>
<code>keys *</code></li>
<li>æŸ¥çœ‹æŸä¸ªé”®æ˜¯å¦å­˜åœ¨(å­˜åœ¨è¿”å›1;ä¸å­˜åœ¨è¿”å›0)<br>
<code>exists &lt;key&gt;</code></li>
<li>éšæœºå–é”®<br>
<code>randomkey</code></li>
<li>å°†å½“å‰æ•°æ®åº“çš„å€¼ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ•°æ®åº“<br>
<code>move &lt;key&gt; æ•´æ•°ç´¢å¼•æ ‡è¯†</code></li>
<li>ä¿®æ”¹é”®çš„åç§°<br>
ç›´æ¥ä¿®æ”¹: <code>rename &lt;key&gt; &lt;æ–°åç§°&gt;</code><br>
å…ˆåˆ¤æ–­æ–°åç§°,ä¸å­˜åœ¨æ—¶ä¿®æ”¹: <code>renamex &lt;key&gt; &lt;æ–°åç§°&gt;</code></li>
<li>å¯¹å€¼ä¸ºæ•´æ•°ç±»å‹çš„æ•°æ®å¯è¿›è¡Œè‡ªå¢è‡ªå‡æ“ä½œ<br>
è‡ªå¢1: <code>incr &lt;key&gt;</code><br>
è‡ªå¢n: <code>incrby &lt;key&gt; n</code><br>
è‡ªå‡1: <code>decr &lt;key&gt;</code></li>
<li>æŸ¥çœ‹å€¼çš„æ•°æ®ç±»å‹<br>
<code>type &lt;key&gt;</code></li>
</ol>
<h2 id="ç¬¬å››ç« -å…¶ä»–æ•°æ®ç±»å‹">ç¬¬å››ç«  å…¶ä»–æ•°æ®ç±»å‹</h2>
<h3 id="41-hashæ•°æ®hashmapstringhashmapstringstring">4.1 Hashæ•°æ®(HashMap&lt;String,HashMap&lt;String,String&gt;&gt;)</h3>
<ol>
<li>æ·»åŠ æ•°æ®<br>
<code>hset &lt;key&gt; [&lt;å­—æ®µ&gt; &lt;å€¼&gt;]...</code></li>
<li>è·å–å€¼<br>
è·å–æŸä¸ªå­—æ®µå€¼: <code>hget &lt;key&gt; &lt;å­—æ®µ&gt;</code><br>
è·å–å…¨éƒ¨å­—æ®µå’Œå€¼: <code>hgetall &lt;key&gt;</code></li>
<li>åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨(å­˜åœ¨è¿”å›1;ä¸å­˜åœ¨è¿”å›0)<br>
<code>hexists &lt;key&gt; &lt;å­—æ®µ&gt;</code></li>
<li>åˆ é™¤å­—æ®µ(åˆ é™¤æˆåŠŸä¸º1;åˆ é™¤å¤±è´¥ä¸º0)<br>
<code>hdel &lt;key&gt; &lt;å­—æ®µ&gt;</code></li>
<li>è·å–hashä¸­å­˜å‚¨é”®å€¼å¯¹çš„ä¸ªæ•°<br>
<code>hlen &lt;key&gt;</code></li>
<li>ä¸€æ¬¡æ€§è·å–æ‰€æœ‰çš„å­—æ®µå€¼<br>
<code>hvals &lt;key&gt;</code></li>
<li>ä¸€æ¬¡æ€§è·å–æ‰€æœ‰çš„å­—æ®µ<br>
<code>hkeys &lt;key&gt;</code></li>
</ol>
<h3 id="42-listæ•°æ®linkedlist">4.2 Listæ•°æ®(LinkedList)</h3>
<ol>
<li>æ·»åŠ å…ƒç´ <br>
å¤´éƒ¨æ·»åŠ å…ƒç´ ï¼š<code>lpush &lt;key&gt; &lt;element&gt;...</code><br>
å°¾éƒ¨æ·»åŠ å…ƒç´ ï¼š<code>rpush &lt;key&gt; &lt;element&gt;...</code><br>
æŒ‡å®šä½ç½®å‰åæ·»åŠ å…ƒç´ ï¼š<code>linsert &lt;key&gt; before/after &lt;æŒ‡å®šå…ƒç´ &gt; &lt;element&gt;</code></li>
<li>è·å–å…ƒç´ <br>
é€šè¿‡ä¸‹è¡¨è·å–å…ƒç´ ï¼š<code>lindex &lt;key&gt; &lt;ä¸‹æ ‡&gt;</code><br>
è·å–å¹¶ç§»é™¤å¤´éƒ¨å…ƒç´ ï¼š<code>lpop &lt;key&gt;</code><br>
è·å–å¹¶ç§»é™¤å°¾éƒ¨å…ƒç´ ï¼š<code>rpop &lt;key&gt;</code><br>
è·å–åˆ¶å®šèŒƒå›´å†…çš„å…ƒç´ (è´Ÿæ•°ä¸ºä»åå¾€å‰)ï¼š<code>lrange &lt;key&gt; start stop</code><br>
è·å–æŸä¸ªé”®çš„å…¨éƒ¨å…ƒç´ ï¼š<code>lrange &lt;key&gt; 0 -1</code></li>
<li>ä»å½“å‰æ•°ç»„ä¸­çš„å³ä¾§è·å–ä¸€ä¸ªæ•°æ’å…¥åˆ°ç›®æ ‡æ•°ç»„çš„å·¦ä¾§<br>
<code>rpoplpush å½“å‰æ•°ç»„ ç›®æ ‡æ•°ç»„</code></li>
<li>é˜»å¡æ“ä½œ,ç­‰å¾…æ•°æ®äº§ç”Ÿ<br>
<code>blpop &lt;key&gt;... timeout</code></li>
</ol>
<h3 id="43-setæ•°æ®hashset">4.3 Setæ•°æ®(HashSet)</h3>
<ol>
<li>æ·»åŠ æ•°æ®<br>
<code>sadd &lt;key&gt; &lt;value&gt;...</code></li>
<li>æŸ¥çœ‹æ•°æ®ä¸ªæ•°<br>
<code>scard &lt;key&gt;</code></li>
<li>åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼<br>
<code>sismember &lt;key&gt; &lt;value&gt;</code></li>
<li>åˆ—å‡ºæ‰€æœ‰å€¼<br>
<code>smembers &lt;key&gt;</code></li>
<li>é›†åˆä¹‹é—´çš„è¿ç®—<br>
é›†åˆä¹‹é—´çš„å·®é›†ï¼š<code>sdiff &lt;key1&gt; &lt;key2&gt;</code><br>
é›†åˆä¹‹é—´çš„äº¤é›†ï¼š<code>sinter &lt;key1&gt; &lt;key2&gt;</code><br>
é›†åˆä¹‹é—´å¹¶é›†ï¼š<code>sunion &lt;key1&gt; &lt;key2&gt;</code><br>
å°†é›†åˆä¹‹é—´çš„å·®é›†å­˜åˆ°ç›®æ ‡é›†åˆä¸­ï¼š<code>sdiffstore ç›®æ ‡ &lt;key1&gt; &lt;key2&gt;</code><br>
å°†é›†åˆä¹‹é—´çš„äº¤é›†å­˜åˆ°ç›®æ ‡é›†åˆä¸­ï¼š<code>sinterstore ç›®æ ‡ &lt;key1&gt; &lt;key2&gt;</code><br>
å°†é›†åˆä¹‹é—´çš„å¹¶é›†å­˜åˆ°ç›®æ ‡é›†åˆä¸­ï¼š<code>sunionstore ç›®æ ‡ &lt;key1&gt; &lt;key2&gt;</code></li>
<li>ç§»åŠ¨åˆ¶å®šå€¼åˆ°å¦ä¸€ä¸ªé›†åˆä¸­<br>
<code> smove &lt;key&gt; ç›®æ ‡ &lt;value&gt;</code></li>
<li>åˆ é™¤æ•°æ®<br>
éšæœºç§»é™¤ä¸€ä¸ªæ•°æ®ï¼š<code>spop &lt;key&gt;</code><br>
ç§»é™¤æŒ‡å®šå€¼ï¼š<code>srem &lt;key&gt; &lt;value&gt;</code></li>
</ol>
<h3 id="44-sortedsetæ•°æ®">4.4 SortedSetæ•°æ®</h3>
<ol>
<li>æ·»åŠ å¸¦åˆ†æ•°çš„å€¼<br>
<code>zadd &lt;key&gt; [&lt;score&gt; &lt;value&gt;]...</code></li>
<li>æŸ¥è¯¢æœ‰å¤šå°‘ä¸ªå€¼<br>
<code>zcard &lt;key&gt;</code></li>
<li>ç§»é™¤ç‰¹å®šçš„å€¼<br>
<code>zrem &lt;key&gt; &lt;value&gt;...</code></li>
<li>è·å–åŒºé—´å†…çš„å€¼<br>
<code>zrange &lt;key&gt; start stop</code></li>
<li>æ ¹æ®å€¼çš„åˆ†æ•°æ¥è·å–<br>
é€šè¿‡åˆ†æ•°å€¼æŸ¥çœ‹ï¼š<code>zrangebyscore &lt;key&gt; start stop [withscores] [limit]</code><br>
ç»Ÿè®¡æŸä¸ªåˆ†æ•°å€¼å†…çš„æ•°é‡ï¼š<code>zcount &lt;key&gt; start stop</code><br>
æ ¹æ®åˆ†æ•°è·å–æŒ‡å®šæ’åï¼š<code>zrank &lt;key&gt; &lt;value&gt;</code></li>
</ol>
<h3 id="45-å…¶ä»–æ•°æ®">4.5 å…¶ä»–æ•°æ®</h3>
<ul>
<li>Bitmap: ä½å›¾æ“ä½œ</li>
<li>HyperLogLong: åšåŸºæ•°ç»Ÿè®¡</li>
<li>Geospatial: åœ°ç†ç©ºé—´ä»¥åŠç´¢å¼•åŠå¾„æŸ¥è¯¢</li>
</ul>
<p>ğŸ“‘ å¸¸ç”¨å‘½ä»¤å‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/47692277">https://zhuanlan.zhihu.com/p/47692277</a></p>
<h2 id="ç¬¬äº”ç« -redisæŒä¹…åŒ–">ç¬¬äº”ç«  RedisæŒä¹…åŒ–</h2>
<blockquote>
<p>ğŸ”– æŒä¹…åŒ–å®ç°æ–¹å¼æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<ol>
<li>ç›´æ¥ä¿å­˜å½“å‰å·²ç»å­˜å‚¨çš„æ•°æ®,ç›¸å½“äºå¤åˆ¶å†…å­˜ä¸­çš„æ•°æ®åˆ°ç£ç›˜ä¸Š,éœ€è¦æ¢å¤æ•°æ®æ—¶ç›´æ¥è¯»å–å³å¯</li>
<li>ä¿å­˜å­˜æ”¾æ•°æ®çš„æ‰€æœ‰è¿‡ç¨‹,åªéœ€è¦å°†æ•´ä¸ªè¿‡ç¨‹å®Œæ•´åœ°é‡æ¼”ä¸€éå°±èƒ½ä¿è¯ä¸ä¹‹å‰æ•°æ®åº“ä¸­çš„å†…å®¹ä¸€è‡´</li>
</ol>
</blockquote>
<h3 id="51-rdbä¿å­˜å·²ç»å­˜å‚¨çš„æ•°æ®">5.1 RDBï¼ˆä¿å­˜å·²ç»å­˜å‚¨çš„æ•°æ®ï¼‰</h3>
<p>æ–¹å¼ä¸€ï¼šåœ¨Redisä¸»è¿›ç¨‹ä¸­å¼€å¯ä¿å­˜äº‹ç‰©ï¼š<code>save</code><br>
æ–¹å¼äºŒï¼šå•ç‹¬å¼€ä¸€ä¸ªå­è¿›ç¨‹åå°æ‰§è¡Œä¿å­˜ï¼š<code>bgsave</code><br>
æ‰§è¡Œåä¼šäº§ç”Ÿä¸€ä¸ªdump.rdbæ–‡ä»¶,æ–‡ä»¶ä¸­çš„æ•°æ®å°±ä¿å­˜äº†å†…å­˜ä¸­å­˜æ”¾çš„æ•°æ®,å½“æœåŠ¡é‡å¯å,ä¼šè‡ªåŠ¨åŠ è½½é‡Œé¢çš„å†…å®¹åˆ°å¯¹åº”çš„æ•°æ®åº“ä¸­<br>
ä¿®æ”¹é…ç½®æ–‡ä»¶çš„é…ç½®ä¿¡æ¯ï¼š<strong>save 300 10</strong> # 300ç§’å†…æœ‰10ä¸ªå†™å…¥</p>
<h3 id="52-aofå­˜æ”¾æ•°æ®çš„æ‰€æœ‰è¿‡ç¨‹ä¿¡æ¯">5.2 AOF(å­˜æ”¾æ•°æ®çš„æ‰€æœ‰è¿‡ç¨‹ä¿¡æ¯)</h3>
<p>é€šè¿‡æ—¥å¿—çš„å½¢å¼æ¯æ¬¡æ‰§è¡Œçš„å‘½ä»¤éƒ½è¿›è¡Œä¿å­˜,æœåŠ¡å™¨é‡å¯æ—¶ä¼šå°†æ‰€æœ‰å‘½ä»¤ä¸€æ¬¡æ‰§è¡Œ<br>
AOFå†™æ—¥å¿—çš„ç­–ç•¥ï¼š</p>
<ul>
<li><strong>always</strong>: æ¯æ¬¡æ‰§è¡Œå†™æ“ä½œéƒ½ä¼šä¿å­˜ä¸€æ¬¡</li>
<li><strong>everysec</strong>: æ¯ç§’ä¿å­˜ä¸€æ¬¡(é»˜è®¤é…ç½®)</li>
<li><strong>no</strong>: ç³»ç»Ÿè‡ªå®šä¹‰</li>
</ul>
<p>AOFé€šè¿‡é…ç½®æ–‡ä»¶å¼€å¯ï¼Œå°†appendonlyçš„noæ”¹ä¸ºyesï¼š<code>appendonly yes</code><br>
AOFé…ç½®æ–‡ä»¶è°ƒæ•´ç­–ç•¥ï¼š<code>appendfsync always | everysec | no</code><br>
é‡å¯æœåŠ¡å,å¯ä»¥çœ‹åˆ°æœåŠ¡å™¨ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªappendonly.aofæ–‡ä»¶,å­˜å‚¨çš„å°±æ˜¯æˆ‘ä»¬æ‰§è¡Œçš„å‘½ä»¤<br>
æ‰‹åŠ¨æ‰§è¡Œé‡å†™æ“ä½œï¼š<code>bgrewriteaof</code><br>
é…ç½®æ–‡ä»¶ä¸­é…ç½®è‡ªåŠ¨é‡å†™:<br>
ç™¾åˆ†æ¯”è®¡ç®—ï¼š<code>auto-aof-rewrite-percentage 100</code><br>
å½“è¾¾åˆ°è¿™ä¸ªå¤§å°æ—¶,è§¦å‘è‡ªåŠ¨é‡å†™ï¼š<code>auto-aof-rewrite-min-size 64mb</code></p>
<h3 id="53-rdbå’Œaofå¯¹æ¯”">5.3 RDBå’ŒAOFå¯¹æ¯”</h3>
<p><strong>AOF</strong>:</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>: å­˜å‚¨é€Ÿåº¦å¿«,æ¶ˆè€—èµ„æºå°‘ã€æ”¯æŒå®æ—¶å­˜å‚¨</li>
<li><strong>ç¼ºç‚¹</strong>: åŠ è½½æ•°æ®æ…¢ã€æ•°æ®ä½“ç§¯å¤§</li>
</ul>
<p><strong>RDB</strong>:</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>: åŠ è½½é€Ÿåº¦å¿«ã€æ•°æ®ä½“ç§¯å°</li>
<li><strong>ç¼ºç‚¹</strong>: å­˜å‚¨é€Ÿåº¦æ…¢,å¤§é‡æ¶ˆè€—èµ„æºã€ä¼šå‘ç”Ÿæ•°æ®ä¸¢å¤±</li>
</ul>
<h2 id="ç¬¬å…­ç« -äº‹ç‰©å’Œé”æœºåˆ¶">ç¬¬å…­ç«  äº‹ç‰©å’Œé”æœºåˆ¶</h2>
<h3 id="61-äº‹ç‰©">6.1 äº‹ç‰©</h3>
<blockquote>
<p>ğŸ”– ä¿è¯å¤šæ¡å‘½ä»¤ä¸€æ¬¡æ€§å®Œæ•´æ‰§è¡Œè€Œä¸­é€”ä¸å—åˆ°å…¶ä»–å‘½ä»¤å¹²æ‰°</p>
</blockquote>
<p><strong>å¼€å¯äº‹ç‰©</strong>ï¼š<code>multi</code><br>
<strong>æ‰§è¡Œäº‹ç‰©</strong>ï¼š<code>exec</code><br>
<strong>å–æ¶ˆäº‹ç‰©</strong>ï¼š<code>discard</code></p>
<h3 id="62-é”æœºåˆ¶">6.2 é”æœºåˆ¶</h3>
<blockquote>
<p><strong>æ‚²è§‚é”</strong>: æ—¶åˆ»è®¤ä¸ºåˆ«äººå›æ¥æŠ¢å èµ„æº,ç¦æ­¢ä¸€åˆ‡å¤–æ¥è®¿é—®,ç›´åˆ°é‡Šæ”¾é”,å…·æœ‰å¼ºçƒˆçš„æ’ä»–æ€§è´¨<br>
<strong>ä¹è§‚é”</strong>: å¹¶ä¸è®¤ä¸ºä¼šæœ‰å…¶ä»–äººæ¥æŠ¢å èµ„æº,æ‰€ä»¥ä¼šç›´æ¥å¯¹æ•°æ®è¿›è¡Œæ“ä½œ,åœ¨æ“ä½œæ—¶å†å»éªŒè¯æ˜¯å¦ä¼šæœ‰å…¶ä»–äººæŠ¢å èµ„æº</p>
</blockquote>
<p>ç›‘è§†æŸä¸ªç›®æ ‡,å¦‚æœæ‰§è¡Œäº‹åŠ¡ä¹‹å‰è¢«ç›‘è§†çš„ç›®æ ‡å‘ç”Ÿäº†ä¿®æ”¹,åˆ™å–æ¶ˆæœ¬æ¬¡äº‹ç‰©ï¼š<code>watch</code><br>
å–æ¶ˆç›‘è§†ï¼š<code>unwatch</code></p>
<h2 id="ç¬¬ä¸ƒç« -redisä¸åº”ç”¨ç¨‹åºäº¤äº’">ç¬¬ä¸ƒç«  Redisä¸åº”ç”¨ç¨‹åºäº¤äº’</h2>
<h3 id="71-åœ¨mavenä¸­è°ƒç”¨redis">7.1 åœ¨Mavenä¸­è°ƒç”¨Redis</h3>
<ol>
<li>pomæ–‡ä»¶ä¸­å¼•å…¥Redisä¾èµ–<pre><code class="language-java">&lt;!--Jedis - Redisçš„ä¾èµ–åº“--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;redis.clients&lt;/groupId&gt;
    &lt;artifactId&gt;jedis&lt;/artifactId&gt;
    &lt;version&gt;4.0.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--slf4j - è§£å†³Jedisè¿è¡Œæ—¶æç¤ºçš„é—®é¢˜org.slf4j.impl.StaticLoggerBinder--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
    &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;
    &lt;version&gt;1.7.32&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li>æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ<pre><code class="language-java">public static void main(String[] args) {
    Jedis jedis = new Jedis(&quot;localhost&quot;, 6379);
    jedis.close();
}
</code></pre>
</li>
<li>ä¸¾ä¾‹1ï¼šé€šè¿‡jedisè®¾ç½®å¹¶æŸ¥è¯¢æ™®é€šé”®å€¼å¯¹(HashMap&lt;String,String&gt;)<pre><code class="language-java">public static void main(String[] args) {
    try (Jedis jedis = new Jedis(&quot;localhost&quot;, 6379)) {
        jedis.set(&quot;a&quot;, &quot;123&quot;);
        System.out.println(jedis.get(&quot;a&quot;));
    }
}
</code></pre>
</li>
<li>ä¸¾ä¾‹2ï¼šé€šè¿‡jedisè®¾ç½®å¹¶æŸ¥è¯¢Hashæ•°æ®(HashMap&lt;String,HashMap&lt;String,String&gt;&gt;)<pre><code class="language-java">public static void main(String[] args) {
    try (Jedis jedis = new Jedis(&quot;localhost&quot;, 6379)) {
        jedis.hset(&quot;b&quot;, &quot;name&quot;, &quot;å¼ ä¸‰&quot;);
        Map&lt;String, String&gt; temp = new HashMap&lt;&gt;();
        temp.put(&quot;age&quot;, &quot;19&quot;);
        jedis.hset(&quot;b&quot;, temp);
        jedis.hgetAll(&quot;b&quot;).forEach((key, value) -&gt; {
            System.out.println(key + &quot; : &quot; + value);
        });
    }
}
</code></pre>
</li>
<li>ä¸¾ä¾‹3ï¼šé€šè¿‡jedisè®¾ç½®å¹¶æŸ¥è¯¢Listæ•°æ®(LinkedLIst)<pre><code class="language-java">public static void main(String[] args) {
    try (Jedis jedis = new Jedis(&quot;localhost&quot;, 6379)) {
        jedis.lpush(&quot;c&quot;, &quot;123&quot;, &quot;456&quot;, &quot;789&quot;);
        jedis.lrange(&quot;c&quot;, 0, -1).forEach(System.out::println);
    }
}
</code></pre>
</li>
<li>ä¸¾ä¾‹4ï¼šé€šè¿‡jedisè®¾ç½®å¹¶æŸ¥è¯¢Setæ•°æ®(HashSet)<pre><code class="language-java">public static void main(String[] args) {
    try (Jedis jedis = new Jedis(&quot;localhost&quot;, 6379)) {
        jedis.sadd(&quot;d&quot;, &quot;123&quot;, &quot;123&quot;, &quot;456&quot;, &quot;789&quot;);
        jedis.smembers(&quot;d&quot;).forEach(System.out::println);
    }
}
</code></pre>
</li>
<li>ä¸¾ä¾‹5ï¼šé€šè¿‡jedisè®¾ç½®å¹¶æŸ¥è¯¢SortedSetæ•°æ®<pre><code class="language-java">public static void main(String[] args) {
    try (Jedis jedis = new Jedis(&quot;localhost&quot;, 6379)) {
        jedis.zadd(&quot;e&quot;, 5, &quot;abc&quot;);
        jedis.zadd(&quot;e&quot;, 10, &quot;def&quot;);
        jedis.zadd(&quot;e&quot;, 2, &quot;hij&quot;);
        jedis.zrange(&quot;e&quot;, 0, -1).forEach(System.out::println);
    }
}
</code></pre>
</li>
</ol>
<h3 id="72-åœ¨springbootä¸­è°ƒç”¨redis">7.2 åœ¨SpringBootä¸­è°ƒç”¨Redis</h3>
<ol>
<li>åˆ›å»ºSpringBootå‹¾é€‰Lombokå’ŒRedisç›¸å…³ä¾èµ–<pre><code class="language-java">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li>åœ¨application.ymlä¸­é…ç½®redisç›¸å…³ä¿¡æ¯<pre><code class="language-java">spring:
    redis:
        host: localhost
        port: 6379
        database: 0
</code></pre>
</li>
<li>SpringBootè‡ªåŠ¨åˆ›å»ºRedisä¸¤ç§æ¨¡æ¿Bean(RedisAutoConfiguration.java)<pre><code class="language-java">@Bean
@ConditionalOnMissingBean(
    name = {&quot;redisTemplate&quot;}
)
@ConditionalOnSingleCandidate(RedisConnectionFactory.class)
public RedisTemplate&lt;Object, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) {
RedisTemplate&lt;Object, Object&gt; template = new RedisTemplate();
    template.setConnectionFactory(redisConnectionFactory);
    return template;
}

@Bean
@ConditionalOnMissingBean
@ConditionalOnSingleCandidate(RedisConnectionFactory.class)
public StringRedisTemplate stringRedisTemplate(RedisConnectionFactory redisConnectionFactory) {
    return new StringRedisTemplate(redisConnectionFactory);
}
</code></pre>
</li>
<li>ä¸¾ä¾‹1ï¼šé€šè¿‡StringRedisTemplateè®¾ç½®å¹¶æŸ¥è¯¢æ™®é€šé”®å€¼å¯¹(HashMap&lt;String,String&gt;)<pre><code class="language-java">@Autowired
private StringRedisTemplate template;

@Test
void test1() {
    template.opsForValue().set(&quot;a&quot;, &quot;lisi&quot;);
    System.out.println(template.opsForValue().get(&quot;a&quot;));
}
</code></pre>
</li>
<li>ä¸¾ä¾‹2ï¼šé€šè¿‡StringRedisTemplateåˆ é™¤å¹¶åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ™®é€šé”®å€¼å¯¹(HashMap&lt;String,String&gt;)<pre><code class="language-java">template.delete(&quot;a&quot;);
template.hasKey(&quot;a&quot;);
</code></pre>
</li>
</ol>
<h3 id="73-åœ¨springbootä¸­redisäº‹ç‰©ç®¡ç†å™¨">7.3 åœ¨SpringBootä¸­Redisäº‹ç‰©ç®¡ç†å™¨</h3>
<blockquote>
<p>ğŸ”– Springæ²¡æœ‰ä¸“é—¨çš„Redisäº‹ç‰©ç®¡ç†å™¨ï¼Œæ‰€ä»¥åªèƒ½å€ŸåŠ©äºJDBCæä¾›çš„</p>
</blockquote>
<ol>
<li>åœ¨pomæ–‡ä»¶ä¸­å¼•å…¥JDBCä¾èµ–<pre><code class="language-java">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;8.0.21&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li>åœ¨application.ymlä¸­é…ç½®MySQLæ•°æ®åº“ä¿¡æ¯<pre><code class="language-java">spring:
    datasource:
        url: jdbc:mysql://localhost:3306/demo?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true
        driver-class-name: com.mysql.cj.jdbc.Driver
        username: root
        password: 
</code></pre>
</li>
<li>åˆ›å»ºRedisService,å¹¶å¼€å¯Redisäº‹ç‰©<pre><code class="language-java">@Service
public class RedisService {
    @Autowired
    private StringRedisTemplate template;

    @PostConstruct
    public void init() {
        template.setEnableTransactionSupport(true);
    }

    @Transactional
    public void test() {
        template.multi();
        template.opsForValue().set(&quot;a&quot;, &quot;wangwu&quot;);
        template.exec();
    }
}
</code></pre>
</li>
<li>è°ƒç”¨RedisServiceçš„testæ–¹æ³•<pre><code class="language-java">@Autowired
RedisService redisService;

@Test
void test1() {
    redisService.test();
}
</code></pre>
</li>
</ol>
<h3 id="74-åœ¨springbootä¸­redisåºåˆ—åŒ–">7.4 åœ¨SpringBootä¸­Redisåºåˆ—åŒ–</h3>
<p><strong>JDKè‡ªå¸¦çš„åºåˆ—åŒ–å™¨</strong></p>
<ol>
<li>åˆ›å»ºDemoå®ä½“ç±»<pre><code class="language-java">@Data
@AllArgsConstructor
@NoArgsConstructor
public class Demo implements Serializable {
    String id;
    String name;
}
</code></pre>
</li>
<li>é€šè¿‡RedisTemplateè°ƒç”¨<pre><code class="language-java">@Autowired
private RedisTemplate&lt;Object, Object&gt; template;

@Test
void test1() {
    StringRedisSerializer StringRedisSerializer=new StringRedisSerializer();
    template.setKeySerializer(StringRedisSerializer);
    Demo demo = new Demo(&quot;1&quot;, &quot;zhangsan&quot;);
    template.opsForValue().set(&quot;e&quot;, demo);
}
</code></pre>
</li>
</ol>
<p><strong>Jacksonåºåˆ—åŒ–å™¨</strong></p>
<ol>
<li>
<p>åˆ›å»ºDemoå®ä½“ç±»</p>
<pre><code class="language-java">@Data
@AllArgsConstructor
@NoArgsConstructor
public class Demo {
    String id;
    String name;
}
</code></pre>
</li>
<li>
<p>åœ¨pomæ–‡ä»¶ä¸­å¼•å…¥jackson-databindä¾èµ–</p>
<pre><code class="language-java">&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li>
<p>é€šè¿‡RedisTemplateè°ƒç”¨</p>
<pre><code class="language-java">@Autowired
private RedisTemplate&lt;Object, Object&gt; template;

@Test
void test1() {
    StringRedisSerializer StringRedisSerializer=new StringRedisSerializer();
    template.setKeySerializer(StringRedisSerializer);
    template.setValueSerializer(new Jackson2JsonRedisSerializer&lt;Object&gt;(Object.class));
    Demo demo = new Demo(&quot;1&quot;, &quot;zhangsan&quot;);
    template.opsForValue().set(&quot;e&quot;, demo);
}
</code></pre>
</li>
</ol>

                </div>
            </article>
        </div>

        

        

        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first"></div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        <div>
        <span>æ¬¢è¿æ¥åˆ°ğŸ¦Œçš„å°ä¹¦å±‹</span>&nbsp;&nbsp;
    </div>
    <div>
        æ­å»ºè·ä»Š:&nbsp;&nbsp;<span id="time" style="background-image: linear-gradient(to right, #1D976C, #93F9B9); -webkit-background-clip: text; color:
        transparent;"></span>
    </div>
    <div>
        ä¸€ä¸ª<span
            style="background-image: linear-gradient(to right, #6DD5FA, #2980B9); -webkit-background-clip: text; color: transparent;">æ­£åœ¨å¥‹æ–—</span>ã€<span
            style="background-image: linear-gradient(to right,  #009FFF, #ec2F4B); -webkit-background-clip: text; color: transparent;">ä¸æ–­æ±‚å­¦</span>ã€<span
            style="background-image: linear-gradient(to right, #f12711, #f5af19); -webkit-background-clip: text; color: transparent;">è¿½æ±‚æ–°çŸ¥</span>ã€<span
            style="background-image: linear-gradient(to right, #FDC830, #F37335); -webkit-background-clip: text; color: transparent;">åŠªåŠ›åˆ›æ–°</span>çš„æœ‰å¿—é’å¹´
    </div>

    <script>
        Date.prototype.format = function (format) {
            var o = {
                "M+": this.getMonth() + 1, //month
                "d+": this.getDate(), //day
                "h+": this.getHours(), //hour
                "m+": this.getMinutes(), //minute
                "s+": this.getSeconds(), //second
                "q+": Math.floor((this.getMonth() + 3) / 3), //quarter
                "S": this.getMilliseconds() //millisecond
            }
            if (/(y+)/.test(format)) format = format.replace(RegExp.$1,
                (this.getFullYear() + "").substr(4 - RegExp.$1.length));
            for (var k in o) if (new RegExp("(" + k + ")").test(format))
                format = format.replace(RegExp.$1,
                    RegExp.$1.length == 1 ? o[k] :
                        ("00" + o[k]).substr(("" + o[k]).length));
            return format;
        }
        //å…¶ä¸­starttimeæ ¼å¼ä¸º20180101010101
        function getDiffTwoTime(startTime, endTime) {
            if (startTime.length < 14 || endTime.length < 14) {
                alert('æ—¶é—´æ ¼å¼ä¸æ­£ç¡®');
            }
            var startArr = [startTime.substring(0, 4), startTime.substring(4, 6), startTime.substring(6, 8), startTime.substring(8, 10), startTime.substring(10, 12), startTime.substring(12, 14)];//åˆ‡åˆ†å¼€å§‹æ—¶é—´ä¸ºæ•°ç»„
            var endArr = [endTime.substring(0, 4), endTime.substring(4, 6), endTime.substring(6, 8), endTime.substring(8, 10), endTime.substring(10, 12), endTime.substring(12, 14)];//åˆ‡åˆ†ç»“æŸæ—¶é—´ä¸ºæ•°ç»„
            var dateStart = new Date(startArr[0], startArr[1], startArr[2], startArr[3], startArr[4], startArr[5]);//é‡‡ç”¨new Date(yyyy,mth,dd,hh,mm,ss);åˆ›å»ºæ–¹å¼åˆ†åˆ«ä¼ å…¥å¹´æœˆæ—¥æ—¶åˆ†ç§’
            var dateEnd = new Date(endArr[0], endArr[1], endArr[2], endArr[3], endArr[4], endArr[5]);
            var dateInterval = dateEnd.getTime() - dateStart.getTime() //è·å–æ—¶é—´å·®æ¯«ç§’
            //è®¡ç®—å‡ºç›¸å·®å¤©æ•°
            var days = Math.floor(dateInterval / (24 * 60 * 60 * 1000));
            //è®¡ç®—å°æ—¶æ•°
            var hourLevel = dateInterval % (24 * 60 * 60 * 1000);
            var hours = Math.floor(hourLevel / (60 * 60 * 1000))
            //è®¡ç®—åˆ†é’Ÿæ•°
            var minutesLevel = hourLevel % (60 * 60 * 1000);
            var minutes = Math.floor(minutesLevel / (60 * 1000));
            //è®¡ç®—ç§’æ•°
            var seconds = Math.round((minutesLevel % (60 * 1000)) / 1000);
            return days + ' å¤© ' + hours + ' æ—¶ ' + minutes + ' åˆ† ' + seconds + ' ç§’ '
        }
        //å¡«å……æ—¶é—´
        function fillintime() {
            let startTime = new Date("2023-01-07 22:30:00").format('yyyyMMddhhmmss');
            let currentTime = new Date().format('yyyyMMddhhmmss');
            document.getElementById('time').innerHTML = getDiffTwoTime(startTime, currentTime)
        }
        //å®šæœŸæ‰§è¡Œ
        let ref = setInterval(function () {
            fillintime();
            // clearInterval(ref); //å–æ¶ˆæ‰§è¡Œ
        }, 1000);
    </script>
    </div>
    <div style="display: none;">
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="https://stag1129.github.io/note//atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
